FROM golang:1.12-alpine AS builder

WORKDIR /backend
COPY . .

# Because alpine containers try to be small they leave out most things, so
# download the things we need here
RUN apk add --no-cache git make

ENV GO111MODULE=on
ENV CGO_ENABLED=0
RUN make build

ENTRYPOINT ["/backend/bin/server"]
